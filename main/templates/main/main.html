{% extends 'base.html' %}
<script>
    var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
};
// 정렬방식 셀렉트 박스 유지
$(document).ready(function(){
  var sort = getUrlParameter('sort');
  if(sort == 'likes'){
    $('.sort-likes').prop('selected', 'selected')
  }else if(sort == 'mypost'){
    $('.sort-mypost').prop('selected', 'selected')
  }else{
    $('.sort-date').prop('selected', 'selected')
  }
});

</script>
{% block content %}
<style>
{#@font-face{#}
{#        src: url("../../static/font/BinggraeTaom-Bold.otf");#}
{#        font-family: "Taom";#}
{#    }#}




.button_container{
    text-align : left;
    margin-top: 100px;
    background-color: #daf1de;
    padding-top: 100px;
    padding-bottom: 100px;
}

.boxes {
    display: inline-block;
}

#box{
    display: inline-block;
    margin: 10px 40px;
    width:400px;
    height: 600px;
    background-color: #fadee1;
    {#box-shadow: #9b9b9b;#}
}

.link{
    color: black;
    font-family: 'Taom', sans-serif;
    display: block;
    background-color: white;
    border-bottom: 5px solid pink;
    font-size: 25px;
}

.link:hover{
    font-weight: 400;
    border-bottom: 5px solid pink;
    text-decoration: none;
}


#recommend_star{
        height: 16px;
}

#like {
    height: 16px;
}

.body {
    background-color: white;
}

</style>

{% load static %}


<select id="sort-select" onchange="location = this.value;">
  <option class="sort-date" value="/">최신순</option>
  <option class="sort-likes" value="?sort=likes">좋아요순</option>
  {% if user.is_authenticated %}
  <option class="sort-mypost" value="?sort=mypost">내가쓴글</option>
  {% endif %}
</select>

    <div class="button_container">
        <div class="boxes">
            <div id="box">
                <a href="{% url 'main:post' %}" class="link">최신 잡썰</a>

                <div class="post_list_container">
                    <table class="table table-bordered table-hover">
    {#                <thead class = "thread-dark head">#}
    {#                    <tr>#}
    {#                        <th scope="col">제목</th>#}
    {#                        <th scope="col">별점</th>#}
    {#                    </tr>#}
    {#                </thead>#}

                    <tbody class="body">
                        {% for post in latest %}
                            <tr>
                              <td><a href="{% url "main:detail" post.id %}" class="category">{{ post.title }}</a></td>
                              <td><img id=recommend_star src="{% static 'main/star.jpg' %}"> {{ post.recommend }}</td>
                                <td>{{ post.updated_at|date:"y-m-d"}}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                    </table>
                </div>
            </div>

            <div id="box">
                <a href="{% url 'main:best_post' %}" class="link">인기 잡썰</a>
                {% for post in liked %}
                    {% if post.total_likes >= 1 %}
                        <table class="table table-bordered table-hover">
                              <tbody>
                                <tr>
                                  <td class="td">
                                     <a href="{% url 'main:detail' post.id  %}" class="category">{{ post.title }}</a></td>
                                    <td class="td"><img id="like" src="{% static 'main/like.png' %}"> {{ post.total_likes }}</td>
                                  <td class="td"><img id=recommend_star src="{% static 'main/star.jpg' %}"> {{ post.recommend }}</td>
                                </tr>
                              </tbody>
                        </table>
                    {% endif %}
                {% endfor %}
            </div>

            <div id="box">
                <a href="#" class="link">추천 잡썰</a>
            </div>
        </div>
    </div>
{% endblock %}
